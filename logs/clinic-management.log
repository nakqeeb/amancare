2025-10-04 00:02:55 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 00:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 00:02:55 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 00:02:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 00:02:55 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/28
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/28
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/28
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 00:02:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 00:02:56 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/search?page=0&size=20&sortBy=timestamp&sortDirection=DESC
2025-10-04 00:02:56 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/search?page=0&size=20&sortBy=timestamp&sortDirection=DESC
2025-10-04 00:02:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:56 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/search?page=0&size=20&sortBy=timestamp&sortDirection=DESC
2025-10-04 00:02:56 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.searchActivities(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,com.nakqeeb.amancare.entity.ActionType,java.lang.String,java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,int,int,java.lang.String,java.lang.String); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 00:02:56 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.searchActivities(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,com.nakqeeb.amancare.entity.ActionType,java.lang.String,java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,int,int,java.lang.String,java.lang.String); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 00:02:56 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* SELECT
        a 
    FROM
        ActivityLog a 
    WHERE
        a.clinicId = :clinicId 
        AND (
            :userId IS NULL 
            OR a.userId = :userId
        ) 
        AND (
            :actionType IS NULL 
            OR a.actionType = :actionType
        ) 
        AND (
            :entityType IS NULL 
            OR a.entityType = :entityType
        ) 
        AND (
            :startDate IS NULL 
            OR a.timestamp >= :startDate
        ) 
        AND (
            :endDate IS NULL 
            OR a.timestamp <= :endDate
        ) 
        AND (
            :searchTerm IS NULL 
            OR LOWER(a.description) LIKE LOWER(CONCAT('%', :searchTerm, '%')) 
            OR LOWER(a.entityName) LIKE LOWER(CONCAT('%', :searchTerm, '%'))
        ) 
    ORDER BY
        a.timestamp DESC,
        a.timestamp desc */ select
            al1_0.id,
            al1_0.action_type,
            al1_0.clinic_id,
            al1_0.clinic_name,
            al1_0.created_at,
            al1_0.description,
            al1_0.duration_ms,
            al1_0.endpoint,
            al1_0.entity_id,
            al1_0.entity_name,
            al1_0.entity_type,
            al1_0.error_message,
            al1_0.http_method,
            al1_0.ip_address,
            al1_0.new_value,
            al1_0.old_value,
            al1_0.success,
            al1_0.timestamp,
            al1_0.updated_at,
            al1_0.user_agent,
            al1_0.user_full_name,
            al1_0.user_id,
            al1_0.user_role,
            al1_0.username 
        from
            activity_logs al1_0 
        where
            al1_0.clinic_id=? 
            and (
                ? is null 
                or al1_0.user_id=?
            ) 
            and (
                ? is null 
                or al1_0.action_type=?
            ) 
            and (
                ? is null 
                or al1_0.entity_type=?
            ) 
            and (
                ? is null 
                or al1_0.timestamp>=?
            ) 
            and (
                ? is null 
                or al1_0.timestamp<=?
            ) 
            and (
                ? is null 
                or lower(al1_0.description) like lower(concat('%', ?, '%')) escape '' 
                or lower(al1_0.entity_name) like lower(concat('%', ?, '%')) escape ''
            ) 
        order by
            al1_0.timestamp desc,
            al1_0.timestamp desc 
        limit
            ?
2025-10-04 00:02:57 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /appointments/today?date=2025-10-03
2025-10-04 00:02:57 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/statistics
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments/today?date=2025-10-03
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/statistics
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments/today?date=2025-10-03
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/statistics
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientStatistics(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.AppointmentController.getTodayAppointments(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.AppointmentController]
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientStatistics(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.AppointmentController.getTodayAppointments(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.AppointmentController]
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=?
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        a 
    FROM
        Appointment a 
    WHERE
        a.clinic = :clinic 
        AND a.appointmentDate = CURRENT_DATE() 
    ORDER BY
        a.appointmentTime */ select
            a1_0.id,
            a1_0.appointment_date,
            a1_0.appointment_time,
            a1_0.appointment_type,
            a1_0.chief_complaint,
            a1_0.clinic_id,
            a1_0.created_at,
            a1_0.created_by,
            a1_0.doctor_id,
            a1_0.duration_minutes,
            a1_0.notes,
            a1_0.patient_id,
            a1_0.status,
            a1_0.updated_at 
        from
            appointments a1_0 
        where
            a1_0.clinic_id=? 
            and a1_0.appointment_date=current_date 
        order by
            a1_0.appointment_time
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.isActive = true */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.is_active=1
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.isActive = false */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.is_active=0
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.createdAt >= :startDateTime 
        AND p.createdAt <= :endDateTime */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.created_at>=? 
            and p1_0.created_at<=?
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.gender = 'MALE' */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.gender='MALE'
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.gender = 'FEMALE' */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.gender='FEMALE'
2025-10-04 00:02:57 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 00:02:57 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        AVG(YEAR(CURRENT_DATE()) - YEAR(p.dateOfBirth)) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.dateOfBirth IS NOT NULL */ select
            avg((year(current_date)-year(p1_0.date_of_birth))) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.date_of_birth is not null
2025-10-04 00:02:58 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=51m47s659ms).
2025-10-04 01:22:38 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 01:22:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 01:22:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 01:22:38 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 01:22:38 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 01:22:38 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 01:22:38 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 01:40:10 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h37m11s479ms).
2025-10-04 02:36:44 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 02:36:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 02:36:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 02:36:44 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 02:36:44 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 02:36:44 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 02:36:44 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 02:52:50 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h12m40s505ms).
2025-10-04 03:57:42 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 03:57:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 03:57:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 03:57:42 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 03:57:42 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 03:57:42 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 03:57:42 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 04:05:54 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h13m3s677ms).
2025-10-04 05:06:56 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:06:56 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:06:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:06:56 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:06:56 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:06:56 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:06:56 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:23:39 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1h17m45s685ms).
2025-10-04 05:32:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:32:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:32:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:32:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:32:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:32:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:32:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/search?page=0&size=20&sortBy=timestamp&sortDirection=DESC
2025-10-04 05:32:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/search?page=0&size=20&sortBy=timestamp&sortDirection=DESC
2025-10-04 05:32:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/search?page=0&size=20&sortBy=timestamp&sortDirection=DESC
2025-10-04 05:32:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.searchActivities(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,com.nakqeeb.amancare.entity.ActionType,java.lang.String,java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,int,int,java.lang.String,java.lang.String); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:32:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.searchActivities(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,com.nakqeeb.amancare.entity.ActionType,java.lang.String,java.time.LocalDateTime,java.time.LocalDateTime,java.lang.String,int,int,java.lang.String,java.lang.String); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:32:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        a 
    FROM
        ActivityLog a 
    WHERE
        a.clinicId = :clinicId 
        AND (
            :userId IS NULL 
            OR a.userId = :userId
        ) 
        AND (
            :actionType IS NULL 
            OR a.actionType = :actionType
        ) 
        AND (
            :entityType IS NULL 
            OR a.entityType = :entityType
        ) 
        AND (
            :startDate IS NULL 
            OR a.timestamp >= :startDate
        ) 
        AND (
            :endDate IS NULL 
            OR a.timestamp <= :endDate
        ) 
        AND (
            :searchTerm IS NULL 
            OR LOWER(a.description) LIKE LOWER(CONCAT('%', :searchTerm, '%')) 
            OR LOWER(a.entityName) LIKE LOWER(CONCAT('%', :searchTerm, '%'))
        ) 
    ORDER BY
        a.timestamp DESC,
        a.timestamp desc */ select
            al1_0.id,
            al1_0.action_type,
            al1_0.clinic_id,
            al1_0.clinic_name,
            al1_0.created_at,
            al1_0.description,
            al1_0.duration_ms,
            al1_0.endpoint,
            al1_0.entity_id,
            al1_0.entity_name,
            al1_0.entity_type,
            al1_0.error_message,
            al1_0.http_method,
            al1_0.ip_address,
            al1_0.new_value,
            al1_0.old_value,
            al1_0.success,
            al1_0.timestamp,
            al1_0.updated_at,
            al1_0.user_agent,
            al1_0.user_full_name,
            al1_0.user_id,
            al1_0.user_role,
            al1_0.username 
        from
            activity_logs al1_0 
        where
            al1_0.clinic_id=? 
            and (
                ? is null 
                or al1_0.user_id=?
            ) 
            and (
                ? is null 
                or al1_0.action_type=?
            ) 
            and (
                ? is null 
                or al1_0.entity_type=?
            ) 
            and (
                ? is null 
                or al1_0.timestamp>=?
            ) 
            and (
                ? is null 
                or al1_0.timestamp<=?
            ) 
            and (
                ? is null 
                or lower(al1_0.description) like lower(concat('%', ?, '%')) escape '' 
                or lower(al1_0.entity_name) like lower(concat('%', ?, '%')) escape ''
            ) 
        order by
            al1_0.timestamp desc,
            al1_0.timestamp desc 
        limit
            ?
2025-10-04 05:32:52 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/28
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/28
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/28
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /appointments/today?date=2025-10-04
2025-10-04 05:32:52 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/statistics
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /appointments/today?date=2025-10-04
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/statistics
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /appointments/today?date=2025-10-04
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/statistics
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.AppointmentController.getTodayAppointments(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.AppointmentController]
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.AppointmentController.getTodayAppointments(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.AppointmentController]
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientStatistics(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientStatistics(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=?
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        a 
    FROM
        Appointment a 
    WHERE
        a.clinic = :clinic 
        AND a.appointmentDate = CURRENT_DATE() 
    ORDER BY
        a.appointmentTime */ select
            a1_0.id,
            a1_0.appointment_date,
            a1_0.appointment_time,
            a1_0.appointment_type,
            a1_0.chief_complaint,
            a1_0.clinic_id,
            a1_0.created_at,
            a1_0.created_by,
            a1_0.doctor_id,
            a1_0.duration_minutes,
            a1_0.notes,
            a1_0.patient_id,
            a1_0.status,
            a1_0.updated_at 
        from
            appointments a1_0 
        where
            a1_0.clinic_id=? 
            and a1_0.appointment_date=current_date 
        order by
            a1_0.appointment_time
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.isActive = true */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.is_active=1
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.isActive = false */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.is_active=0
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.createdAt >= :startDateTime 
        AND p.createdAt <= :endDateTime */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.created_at>=? 
            and p1_0.created_at<=?
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.gender = 'MALE' */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.gender='MALE'
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.gender = 'FEMALE' */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.gender='FEMALE'
2025-10-04 05:32:52 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        AVG(YEAR(CURRENT_DATE()) - YEAR(p.dateOfBirth)) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.dateOfBirth IS NOT NULL */ select
            avg((year(current_date)-year(p1_0.date_of_birth))) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.date_of_birth is not null
2025-10-04 05:33:12 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m32s213ms).
2025-10-04 05:33:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:33:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:33:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:33:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:33:21 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:33:21 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:33:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:33:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:33:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:33:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:33:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:33:51 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:33:51 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:33:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:34:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:34:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:34:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:34:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:34:21 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:34:21 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:34:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:34:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:34:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:34:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:34:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:34:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:34:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:34:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:35:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:35:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:35:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:35:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:35:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:35:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:35:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:35:29 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/28
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/28
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/28
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:35:29 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 05:35:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:35:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:35:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:35:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:35:51 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:35:51 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:35:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:36:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:36:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:36:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:36:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:36:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:36:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:36:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:36:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:36:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:36:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:36:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:36:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:36:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:36:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:37:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:37:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:37:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:37:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:37:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:37:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:37:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:37:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:37:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:37:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:37:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:37:51 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:37:51 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:37:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:38:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:38:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:38:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:38:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:38:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:38:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:38:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:38:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:38:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:38:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:38:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:38:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:38:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:38:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:39:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:39:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:39:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:39:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:39:21 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:39:21 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:39:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:39:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:39:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:39:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:39:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:39:51 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:39:51 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:39:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:40:18 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/28
2025-10-04 05:40:18 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/28
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/28
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/28
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /patients/28
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /patients/28
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.deletePatient(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.deletePatient(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-3] INFO  c.n.amancare.service.PatientService - Deleting patient in clinic 2 by user amal
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* update
        for com.nakqeeb.amancare.entity.Patient */update patients 
    set
        address=?,
        allergies=?,
        blood_type=?,
        chronic_diseases=?,
        clinic_id=?,
        date_of_birth=?,
        email=?,
        emergency_contact_name=?,
        emergency_contact_phone=?,
        first_name=?,
        gender=?,
        is_active=?,
        last_name=?,
        notes=?,
        patient_number=?,
        phone=?,
        updated_at=? 
    where
        id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* insert for
        com.nakqeeb.amancare.entity.ActivityLog */insert 
    into
        activity_logs (action_type, clinic_id, clinic_name, created_at, description, duration_ms, endpoint, entity_id, entity_name, entity_type, error_message, http_method, ip_address, new_value, old_value, success, timestamp, updated_at, user_agent, user_full_name, user_id, user_role, username) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-10-04 05:40:18 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients?page=0&size=10&sortBy=firstName&sortDirection=asc
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients?page=0&size=10&sortBy=firstName&sortDirection=asc
2025-10-04 05:40:18 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/statistics
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/statistics
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients?page=0&size=10&sortBy=firstName&sortDirection=asc
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getAllPatients(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,int,int,java.lang.String,java.lang.String); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getAllPatients(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,int,int,java.lang.String,java.lang.String); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/statistics
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientStatistics(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientStatistics(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.clinic_id=? 
        and p1_0.is_active 
    order by
        p1_0.first_name 
    limit
        ?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.isActive = true */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.is_active=1
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.isActive = false */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.is_active=0
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.createdAt >= :startDateTime 
        AND p.createdAt <= :endDateTime */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.created_at>=? 
            and p1_0.created_at<=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.gender = 'MALE' */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.gender='MALE'
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        COUNT(p) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.gender = 'FEMALE' */ select
            count(p1_0.id) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.gender='FEMALE'
2025-10-04 05:40:18 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        AVG(YEAR(CURRENT_DATE()) - YEAR(p.dateOfBirth)) 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND p.dateOfBirth IS NOT NULL */ select
            avg((year(current_date)-year(p1_0.date_of_birth))) 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and p1_0.date_of_birth is not null
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 05:40:18 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 05:40:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:40:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:40:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:40:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:40:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:40:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:40:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/search?page=0&size=10&isActive=false
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/search?page=0&size=10&isActive=false
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/search?page=0&size=10&isActive=false
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.searchPatients(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.String,com.nakqeeb.amancare.entity.Gender,com.nakqeeb.amancare.entity.BloodType,java.lang.Boolean,int,int); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.searchPatients(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.String,com.nakqeeb.amancare.entity.Gender,com.nakqeeb.amancare.entity.BloodType,java.lang.Boolean,int,int); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:27 [http-nio-8080-exec-4] INFO  c.n.amancare.service.PatientService - Searching patients - clinicId: 2, search: null, gender: null, bloodType: null, isActive: false
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        p 
    FROM
        Patient p 
    WHERE
        p.clinic = :clinic 
        AND (
            :search IS NULL 
            OR :search = '' 
            OR LOWER(p.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(p.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR p.phone LIKE CONCAT('%', :search, '%') 
            OR p.patientNumber LIKE CONCAT('%', :search, '%')
        ) 
        AND (
            :gender IS NULL 
            OR p.gender = :gender
        ) 
        AND (
            :bloodType IS NULL 
            OR p.bloodType = :bloodType
        ) 
        AND (
            :isActive IS NULL 
            OR p.isActive = :isActive
        ) 
    order by
        p.firstName asc,
        p.lastName asc */ select
            p1_0.id,
            p1_0.address,
            p1_0.allergies,
            p1_0.blood_type,
            p1_0.chronic_diseases,
            p1_0.clinic_id,
            p1_0.created_at,
            p1_0.date_of_birth,
            p1_0.email,
            p1_0.emergency_contact_name,
            p1_0.emergency_contact_phone,
            p1_0.first_name,
            p1_0.gender,
            p1_0.is_active,
            p1_0.last_name,
            p1_0.notes,
            p1_0.patient_number,
            p1_0.phone,
            p1_0.updated_at 
        from
            patients p1_0 
        where
            p1_0.clinic_id=? 
            and (
                ? is null 
                or ?='' 
                or lower(p1_0.first_name) like lower(concat('%', ?, '%')) escape '' 
                or lower(p1_0.last_name) like lower(concat('%', ?, '%')) escape '' 
                or p1_0.phone like concat('%', ?, '%') escape '' 
                or p1_0.patient_number like concat('%', ?, '%') escape ''
            ) 
            and (
                ? is null 
                or p1_0.gender=?
            ) 
            and (
                ? is null 
                or p1_0.blood_type=?
            ) 
            and (
                ? is null 
                or p1_0.is_active=?
            ) 
        order by
            p1_0.first_name,
            p1_0.last_name 
        limit
            ?
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        a1_0.patient_id,
        a1_0.id,
        a1_0.appointment_date,
        a1_0.appointment_time,
        a1_0.appointment_type,
        a1_0.chief_complaint,
        a1_0.clinic_id,
        a1_0.created_at,
        a1_0.created_by,
        a1_0.doctor_id,
        a1_0.duration_minutes,
        a1_0.notes,
        a1_0.status,
        a1_0.updated_at 
    from
        appointments a1_0 
    where
        a1_0.patient_id=?
2025-10-04 05:40:27 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        mr1_0.id,
        mr1_0.appointment_id,
        mr1_0.chief_complaint,
        mr1_0.clinic_id,
        mr1_0.created_at,
        mr1_0.created_by,
        mr1_0.doctor_id,
        mr1_0.family_history,
        mr1_0.follow_up_date,
        mr1_0.follow_up_instructions,
        mr1_0.is_confidential,
        mr1_0.notes,
        mr1_0.past_medical_history,
        mr1_0.patient_id,
        mr1_0.physical_examination,
        mr1_0.present_illness,
        mr1_0.social_history,
        mr1_0.status,
        mr1_0.systemic_examination,
        mr1_0.treatment_plan,
        mr1_0.updated_at,
        mr1_0.updated_by,
        mr1_0.visit_date,
        mr1_0.visit_type,
        mr1_0.blood_pressure_diastolic,
        mr1_0.blood_pressure_systolic,
        mr1_0.blood_sugar,
        mr1_0.bmi,
        mr1_0.heart_rate,
        mr1_0.height,
        mr1_0.oxygen_saturation,
        mr1_0.pain_scale,
        mr1_0.respiratory_rate,
        mr1_0.temperature,
        mr1_0.weight,
        a2_0.medical_record_id,
        a2_0.allergy 
    from
        medical_records mr1_0 
    left join
        medical_record_allergies a2_0 
            on mr1_0.id=a2_0.medical_record_id 
    where
        mr1_0.appointment_id=?
2025-10-04 05:40:27 [http-nio-8080-exec-4] INFO  c.n.amancare.service.PatientService - Found 3 patients matching criteria
2025-10-04 05:40:35 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /patients/22
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /patients/22
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /patients/22
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.PatientController.getPatientById(com.nakqeeb.amancare.security.UserPrincipal,java.lang.Long,java.lang.Long); target is of class [com.nakqeeb.amancare.controller.PatientController]
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.address,
        c1_0.created_at,
        c1_0.description,
        c1_0.email,
        c1_0.is_active,
        c1_0.name,
        c1_0.phone,
        c1_0.subscription_end_date,
        c1_0.subscription_plan,
        c1_0.subscription_start_date,
        c1_0.updated_at,
        c1_0.working_days,
        c1_0.working_hours_end,
        c1_0.working_hours_start 
    from
        clinics c1_0 
    where
        c1_0.id=?
2025-10-04 05:40:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        p1_0.id,
        p1_0.address,
        p1_0.allergies,
        p1_0.blood_type,
        p1_0.chronic_diseases,
        p1_0.clinic_id,
        p1_0.created_at,
        p1_0.date_of_birth,
        p1_0.email,
        p1_0.emergency_contact_name,
        p1_0.emergency_contact_phone,
        p1_0.first_name,
        p1_0.gender,
        p1_0.is_active,
        p1_0.last_name,
        p1_0.notes,
        p1_0.patient_number,
        p1_0.phone,
        p1_0.updated_at 
    from
        patients p1_0 
    where
        p1_0.id=?
2025-10-04 05:40:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:40:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:40:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:40:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:40:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:40:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:40:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:41:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:41:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:41:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:41:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:41:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:41:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:41:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:41:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:41:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:41:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:41:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:41:51 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:41:51 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:41:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:42:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:42:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:42:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:42:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:42:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:42:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:42:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:42:51 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:43:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:43:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:43:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:43:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:43:21 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:43:21 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:43:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:43:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:43:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:43:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:43:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:43:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:43:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:43:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:44:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:44:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:44:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:44:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:44:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:44:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:44:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:44:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:44:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:44:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:44:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:44:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:44:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:44:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:45:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:45:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:45:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:45:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:45:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:45:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:45:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:45:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:45:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:45:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:45:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:45:51 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:45:51 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:45:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:46:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:46:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:46:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:46:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:46:21 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:46:21 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:46:21 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:46:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:46:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:46:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:46:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:46:51 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:46:51 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:46:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:47:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:47:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:47:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:47:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:47:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:47:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:47:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:47:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:48:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:48:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:48:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:48:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:48:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:48:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:48:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:48:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:48:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:48:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:48:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:48:51 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:48:51 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:48:51 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:49:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:49:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:49:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:49:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:49:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:49:21 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:49:21 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:49:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:49:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:49:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:49:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:49:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:49:51 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:49:51 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:50:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:50:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:50:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:50:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:50:21 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:50:21 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:50:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:50:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:50:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:50:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:50:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:50:51 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:50:51 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:50:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:51:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:51:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:51:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:51:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:51:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:51:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:51:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:51:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:51:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:51:51 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:51:51 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:51:51 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:51:51 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:52:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:52:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:52:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:52:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:52:21 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:52:21 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:52:21 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:52:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:52:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:52:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:52:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:52:51 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:52:51 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:53:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:53:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:53:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:53:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:53:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:53:21 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:53:21 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:53:51 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:54:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:54:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:54:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:54:21 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:54:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:54:21 [http-nio-8080-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:54:21 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:54:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:54:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:54:51 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:54:51 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:54:51 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:54:51 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:54:51 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:55:21 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:55:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:55:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:55:21 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:55:21 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:55:21 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:55:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:55:51 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:55:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:55:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:55:51 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:55:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:55:51 [http-nio-8080-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:55:51 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:56:21 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:56:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:56:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:56:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:56:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:56:21 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:56:21 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:56:51 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:56:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:56:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:56:51 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:56:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:56:51 [http-nio-8080-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:56:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:57:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:57:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:57:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:57:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:57:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:57:21 [http-nio-8080-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:57:21 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:57:51 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:57:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:57:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:57:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:57:51 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:57:51 [http-nio-8080-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:57:51 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /admin/activities/recent?limit=20
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/activities/recent?limit=20
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.clinic_id,
        u1_0.created_at,
        u1_0.email,
        u1_0.first_name,
        u1_0.is_active,
        u1_0.last_login,
        u1_0.last_name,
        u1_0.password_hash,
        u1_0.phone,
        u1_0.role,
        u1_0.specialization,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/activities/recent?limit=20
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.nakqeeb.amancare.controller.ActivityLogController.getRecentActivities(com.nakqeeb.amancare.security.UserPrincipal,int); target is of class [com.nakqeeb.amancare.controller.ActivityLogController]
2025-10-04 05:58:21 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        al1_0.id,
        al1_0.action_type,
        al1_0.clinic_id,
        al1_0.clinic_name,
        al1_0.created_at,
        al1_0.description,
        al1_0.duration_ms,
        al1_0.endpoint,
        al1_0.entity_id,
        al1_0.entity_name,
        al1_0.entity_type,
        al1_0.error_message,
        al1_0.http_method,
        al1_0.ip_address,
        al1_0.new_value,
        al1_0.old_value,
        al1_0.success,
        al1_0.timestamp,
        al1_0.updated_at,
        al1_0.user_agent,
        al1_0.user_full_name,
        al1_0.user_id,
        al1_0.user_role,
        al1_0.username 
    from
        activity_logs al1_0 
    where
        al1_0.clinic_id=? 
    order by
        al1_0.timestamp desc 
    limit
        ?
